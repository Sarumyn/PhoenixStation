/obj/item/device/malware_injector
	name = "Malware Injector"
	desc = "It's cyberattack toy."
	icon = 'icons/obj/malware_ico.dmi'
	icon_state = "inactive_injector"
	var/bypassing_mode = FALSE
	var/usable = TRUE
	var/antimalware_bypass = FALSE
	var/mode = null

/obj/item/device/malware_injector/attack_self(mob/user)
	if(!usable)
		return
	icon_state = "inactive_injector_keyboard"

	var/t = input(user, "Take malware") as null|anything in malware_choices + list("Cancel")
	if(!t)
		icon_state = "inactive_injector"
		return

	switch(t)
		if("Cancel")
			icon_state = "inactive_injector"
			return
		if("Disabler")
			icon_state = "active_injector"
			overlays.Cut()
			usable = FALSE
			mode = 1
			overlays += "m1"
		if("Crash and Disable")
			icon_state = "active_injector"
			overlays.Cut()
			usable = FALSE
			mode = 2
			overlays += "m2"
		if("Inject Backdoor")
			icon_state = "active_injector"
			overlays.Cut()
			usable = FALSE
			mode = 3
			overlays += "m3"
		if("Inject Time Malware")
			icon_state = "active_injector"
			overlays.Cut()
			usable = FALSE
			mode = 4
			overlays += "m4"
		if("Inject Anti-Malware Bypass")
			icon_state = "active_injector"
			overlays.Cut()
			usable = FALSE
			overlays += "m5"
			mode = 5
		if("Inject Destroy Anti-Malware and Disable Compartment")
			icon_state = "active_injector"
			overlays.Cut()
			usable = FALSE
			overlays += "m6"
			mode = 6
/obj/item/device/malware_injector/afterattack(atom/target, mob/user, proximity)
	var/atom/A = target
	if(!proximity)
		return
	switch(mode)
		if(1) A.act_inject(user, mode)
		if(2) A.act_inject(user, mode)
		if(3) A.act_inject(user, mode)
		if(4) A.act_inject(user, mode)
		if(5) A.act_inject(user, mode)
		if(6) A.act_inject(user, mode)
	//if(isLight)
	//	A.malware_act(user, 1)
	/*
	if(t == "Cancel")
		return

	else if(t == "Disabler")
		icon_state = "active_injector"
		src.cut_overlays()
		usable = FALSE
		src.add_overlay("m1")
		mode = 1
	else if(t == "Crash and Disable")
		icon_state = "active_injector"
		src.cut_overlays()
		usable = FALSE
		src.add_overlay("m2")
		mode = 2
	else if(t == "Inject Backdoor")
		icon_state = "active_injector"
		src.cut_overlays()
		usable = FALSE
		src.add_overlay("m3")
		mode = 3
	else if(t == "Inject Time Malware")
		icon_state = "active_injector"
		src.cut_overlays()
		usable = FALSE
		src.add_overlay("m4")
		mode = 4
	else if(t == "Inject Anti-Malware Bypass")
		icon_state = "active_injector"
		src.cut_overlays()
		usable = FALSE
		src.add_overlay("m5")
		mode = 5
	else if(t == "Inject Destroy Anti-Malware and Disable Compartment")
		icon_state = "active_injector"
		src.cut_overlays()
		usable = FALSE
		src.add_overlay("m6")
		mode = 6
*/
